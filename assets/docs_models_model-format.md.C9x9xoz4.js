import{_ as e,c as a,o as s,a4 as i}from"./chunks/framework.qL1yNBZ5.js";const t="/assets/example.BbzTENNm.png",g=JSON.parse('{"title":"Model Format","description":"","frontmatter":{},"headers":[],"relativePath":"docs/models/model-format.md","filePath":"docs/models/model-format.md","lastUpdated":1715343935000}'),o={name:"docs/models/model-format.md"},n=i('<h1 id="model-format" tabindex="-1">Model Format <a class="header-anchor" href="#model-format" aria-label="Permalink to &quot;Model Format&quot;">​</a></h1><p>Sapiens models are stored in the <code>.glb</code> (glTF 2.0), inside of the <code>models</code> directory. They can be imported into Blender using <strong>File -&gt; Import -&gt; glTF 2.0</strong>.</p><h2 id="setting-up-for-blender" tabindex="-1">Setting up for Blender <a class="header-anchor" href="#setting-up-for-blender" aria-label="Permalink to &quot;Setting up for Blender&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>You need to do this or your model won&#39;t scale correctly.</p></div><p>Make sure that you set the &#39;Mode&#39; to <code>Quaternion (WXYZ)</code> under Object Properties (orange square tab). Whenever you want to scale your model, make sure to use <code>Ctrl + A</code> and select &#39;All Transforms&#39;.</p><h2 id="understanding-the-format" tabindex="-1">Understanding the format <a class="header-anchor" href="#understanding-the-format" aria-label="Permalink to &quot;Understanding the format&quot;">​</a></h2><p>Sapiens models are generally made up of standard geometry, paired with metadata stored as empties. You can learn how materials work <a href="/docs/models/materials.html">here</a>.</p><p><img src="'+t+`" alt=""></p><h3 id="placeholder-empties" tabindex="-1">Placeholder empties <a class="header-anchor" href="#placeholder-empties" aria-label="Permalink to &quot;Placeholder empties&quot;">​</a></h3><p>Some empties are per-model, and are used directly by dave for logic. They aren&#39;t required for all models!</p><p>For example, <code>coconutTree</code> contains empties <code>coconut_1</code> through <code>coconut_4</code>. These are used to position the <code>coconut</code> model in-game.</p><p>These empties are usually paired with code in the <code>scripts/common/modelPlaceholder.lua</code>, so look there for explanation.</p><h3 id="unused-empties" tabindex="-1">Unused empties <a class="header-anchor" href="#unused-empties" aria-label="Permalink to &quot;Unused empties&quot;">​</a></h3><p>The &quot;Camera&quot; and &quot;Lamp&quot; objects are just default Blender objects that the developer tends to leave in there, as they have no effect on the in-game model.</p><h2 id="known-empties" tabindex="-1">Known Empties <a class="header-anchor" href="#known-empties" aria-label="Permalink to &quot;Known Empties&quot;">​</a></h2><p>This section will explain a list of known empties, and their effects.</p><h3 id="icon-camera" tabindex="-1">icon_camera <a class="header-anchor" href="#icon-camera" aria-label="Permalink to &quot;icon_camera&quot;">​</a></h3><p>Used to render the icon.</p><h3 id="pathnode" tabindex="-1">pathNode <a class="header-anchor" href="#pathnode" aria-label="Permalink to &quot;pathNode&quot;">​</a></h3><p><code>pathNode</code> primitives are extra nodes that are added to the pathfinding.</p><p>They are especially important for doorways, as otherwise it&#39;s unlikely that sapiens will happen to find nodes that go through the gap. They&#39;re also added at corners, and on walkable surfaces like floors and steps.</p><p>The engine doesn&#39;t actually place nodes in those locations directly, as the ground might be uneven, but it casts rays through those positions, to try to find a ground position for the pathfinding.</p><h3 id="bounding-radius" tabindex="-1">bounding_radius <a class="header-anchor" href="#bounding-radius" aria-label="Permalink to &quot;bounding_radius&quot;">​</a></h3><p><code>bounding_radius</code> is used to provide a bounding box for your model. Semantics are unknown.</p><h3 id="placecollide" tabindex="-1">placeCollide <a class="header-anchor" href="#placecollide" aria-label="Permalink to &quot;placeCollide&quot;">​</a></h3><p><code>placeCollide</code> primitives are used when placing the object in build mode or planting/decorating, to ensure there are no collisions, eg to stop you placing 100 plants in the same spot.</p><h3 id="static-and-dynamic-primitives" tabindex="-1">static and dynamic primitives <a class="header-anchor" href="#static-and-dynamic-primitives" aria-label="Permalink to &quot;static and dynamic primitives&quot;">​</a></h3><p><code>static</code> primitives are used in the physics when the objects are static, and also for other purposes, but can&#39;t remember all of them off the top of my head. <code>dynamic</code> primitives are for when the object is loose and falling. I think the idea was that the static ones would be more complex, but in practice they are usually the same.</p><h3 id="raytest-limits-other" tabindex="-1">rayTest limits &amp; other <a class="header-anchor" href="#raytest-limits-other" aria-label="Permalink to &quot;rayTest limits &amp; other&quot;">​</a></h3><p><code>rayTest</code> limits, <code>lookat</code> boxes and a few others are typically various hacks for performance.</p><p>For example, the coconut tree: because it is so tall and thin causes performance problems when you are looking through them. Once it hits the bounding radius, it checks every triangle, so the ray test limit is used to reduce that.</p><h2 id="model-remaps" tabindex="-1">Model Remaps <a class="header-anchor" href="#model-remaps" aria-label="Permalink to &quot;Model Remaps&quot;">​</a></h2><p>In Sapiens, it&#39;s common to use the same base model (geometry, empties, etc), but use unique materials. This is done in <code>scripts/common/model.lua</code>, <code>model.remapModels</code>.</p><p>Here is an example:</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">willowBranch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	appleBranch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		darkBark </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;appleBark&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		willowWood </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;appleWood&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	orangeBranch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		darkBark </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;orangeBark&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		willowWood </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;orangeWood&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	peachBranch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		darkBark </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;peachBark&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		willowWood </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;peachWood&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>This example is creating three new models, based on the <code>willowBranch.glb</code> model. The models are called <code>appleBranch</code>, <code>orangeBranch</code>, and <code>peachBranch</code>. The data inside each of these new models is used to reassign the materials.</p><p>So for example <code>appleBranch</code> remaps the material <code>darkBark</code> to be <code>appleBark</code>, and <code>willowWood</code> into <code>appleWood</code>.</p>`,37),l=[n];function r(d,h,p,c,m,k){return s(),a("div",null,l)}const E=e(o,[["render",r]]);export{g as __pageData,E as default};
