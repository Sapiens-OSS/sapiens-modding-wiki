import{_ as e,o as a,c as o,U as s}from"./chunks/framework.1eef7d9b.js";const t="/assets/example.b4e28843.png",D=JSON.parse('{"title":"Model Format","description":"","frontmatter":{},"headers":[],"relativePath":"docs/visuals/model-format.md","filePath":"docs/visuals/model-format.md","lastUpdated":1691015883000}'),n={name:"docs/visuals/model-format.md"},l=s('<h1 id="model-format" tabindex="-1">Model Format <a class="header-anchor" href="#model-format" aria-label="Permalink to &quot;Model Format&quot;">​</a></h1><h3 id="importing-models" tabindex="-1">Importing Models <a class="header-anchor" href="#importing-models" aria-label="Permalink to &quot;Importing Models&quot;">​</a></h3><p>In Sapiens, <code>.glb</code> models can be found inside of <code>GameResources/models</code>. These can be imported into blender using <code>file -&gt; import -&gt; glTF 2.0</code>.</p><h3 id="setting-up-for-blender" tabindex="-1">Setting Up for Blender <a class="header-anchor" href="#setting-up-for-blender" aria-label="Permalink to &quot;Setting Up for Blender&quot;">​</a></h3><p>You need to do this or your model won&#39;t scale correctly. Make sure that you set the scale type to <code>Quaternion (WXYZ)</code> under Object Properties. When you want to scale your model make sure to use <code>Ctrl + A</code> and select apply all transforms.</p><h3 id="understanding-the-format" tabindex="-1">Understanding the Format <a class="header-anchor" href="#understanding-the-format" aria-label="Permalink to &quot;Understanding the Format&quot;">​</a></h3><p>Sapiens models are generally made up of standard geometry, paired with &#39;meta data&#39;, represented via empties. You can <a href="/docs/visuals/materials.html">learn how materials work here.</a>.</p><p><img src="'+t+`" alt=""></p><h3 id="placeholder-empties" tabindex="-1">Placeholder Empties <a class="header-anchor" href="#placeholder-empties" aria-label="Permalink to &quot;Placeholder Empties&quot;">​</a></h3><p>Some empties are per-model, and are used directly by dave for logic. They aren&#39;t required for all models!</p><p>For example, <code>coconutTree</code> contains empties <code>coconut_1</code> through <code>coconut_4</code>. These are used to position the <code>coconut</code> model in-game.</p><p>This kind of logic is usually paired with something written into the <code>modelPlaceholder</code>, so you can look there for inspiration.</p><h3 id="unused-empties" tabindex="-1">Unused Empties <a class="header-anchor" href="#unused-empties" aria-label="Permalink to &quot;Unused Empties&quot;">​</a></h3><p>The &quot;Camera&quot; and &quot;Lamp&quot; objects are just default Blender things that dave tends to leave in there, as they don&#39;t do any harm.</p><h2 id="known-empties" tabindex="-1">Known Empties <a class="header-anchor" href="#known-empties" aria-label="Permalink to &quot;Known Empties&quot;">​</a></h2><p>This section will explain a list of known empties, and their effects.</p><h3 id="icon-camera" tabindex="-1">icon_camera <a class="header-anchor" href="#icon-camera" aria-label="Permalink to &quot;icon_camera&quot;">​</a></h3><p>Used to render the icon.</p><h3 id="pathnode" tabindex="-1">pathNode <a class="header-anchor" href="#pathnode" aria-label="Permalink to &quot;pathNode&quot;">​</a></h3><p><code>pathNode</code> primitives are extra nodes that are added to the pathfinding. They are especially important for doorways, as otherwise it&#39;s unlikely that sapiens will happen to find nodes that go through the gap. They&#39;re also added at corners, and on walkable surfaces like floors and steps. The engine doesn&#39;t actually place nodes in those locations directly, as the ground might be uneaven, but it casts rays through those positions, to try to find a ground position for the pathfinding.</p><h3 id="bounding-radius" tabindex="-1">bounding_radius <a class="header-anchor" href="#bounding-radius" aria-label="Permalink to &quot;bounding_radius&quot;">​</a></h3><p>This empty is used to provide a bounding box for your model. Semantics are unknown.</p><h3 id="placecollide" tabindex="-1">placeCollide <a class="header-anchor" href="#placecollide" aria-label="Permalink to &quot;placeCollide&quot;">​</a></h3><p><code>placeCollide</code> primitives are used when placing the object in build mode or planting/decorating, to ensure there are no collisions, eg to stop you placing 100 plants in the same spot.</p><h3 id="static-and-dynamic-primitives" tabindex="-1">static and dynamic primitives <a class="header-anchor" href="#static-and-dynamic-primitives" aria-label="Permalink to &quot;static and dynamic primitives&quot;">​</a></h3><p><code>static</code> primitives are used in the physics when the objects are static, and also for other purposes, but can&#39;t remember all of them off the top of my head. <code>dynamic</code> primitives are for when the object is loose and falling. I think the idea was that the static ones would be more complex, but in practice they are usually the same.</p><h3 id="raytestlimits-others" tabindex="-1">rayTestLimits &amp; Others <a class="header-anchor" href="#raytestlimits-others" aria-label="Permalink to &quot;rayTestLimits &amp; Others&quot;">​</a></h3><p>And there are <code>rayTest</code> limits, <code>lookat</code> boxes and a few other things I&#39;m not even really sure of anymore. They are various hacks mostly for optimizations. Like the coconut tree because it is so tall and thin causes performance problems when you are looking through them, as once it hits the bounding radius, it checks every triangle. So the ray test limits reduce that.</p><h1 id="model-remaps" tabindex="-1">Model Remaps <a class="header-anchor" href="#model-remaps" aria-label="Permalink to &quot;Model Remaps&quot;">​</a></h1><p>In Sapiens, it&#39;s often desired to use the same base model (geometry, empties, etc), but use unique materials. This can be accomplished using <code>model.lua</code>, <code>model.remapModels</code>.</p><p>Here is an example:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">willowBranch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">	appleBranch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">		darkBark </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">appleBark</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">		willowWood </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">appleWood</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	},</span></span>
<span class="line"><span style="color:#A6ACCD;">	orangeBranch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">		darkBark </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">orangeBark</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">		willowWood </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">orangeWood</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	},</span></span>
<span class="line"><span style="color:#A6ACCD;">	peachBranch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">		darkBark </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">peachBark</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">		willowWood </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">peachWood</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	},</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><p>This example is creating three new models, based on the basic <code>willowBranch.gltf</code> model. The models are called <code>appleBranch</code>, <code>orangeBranch</code>, and <code>peachBranch</code>. The data inside each of these new models is used to remap the materials. So for example <code>appleBranch</code> remaps the material <code>darkBark</code> to be <code>appleBark</code>, and <code>willowWood</code> into <code>appleWood</code>.</p>`,33),r=[l];function p(i,c,d,h,m,u){return a(),o("div",null,r)}const C=e(n,[["render",p]]);export{D as __pageData,C as default};
