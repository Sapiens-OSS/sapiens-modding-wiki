import{_ as s,c as n,o as a,a as e}from"./app.dce89229.js";const C='{"title":"UI Manager (uiManager)","description":"","frontmatter":{},"headers":[{"level":3,"title":"Requiring","slug":"requiring"},{"level":3,"title":"Using","slug":"using"}],"relativePath":"hammerstone/ui-manager.md","lastUpdated":1654654339000}',l={name:"hammerstone/ui-manager.md"},o=e(`<h1 id="ui-manager-uimanager" tabindex="-1">UI Manager (uiManager) <a class="header-anchor" href="#ui-manager-uimanager" aria-hidden="true">#</a></h1><p>UI in Sapiens is fairly complex. The uiManager doesn&#39;t help you build UIs, it just helps you manage their state. For example:</p><ul><li>Giving you mouse control when the UI is active</li><li>Allowing you to press ESC to close the current UI (coming soon)</li><li>Preventing OTHER ui from showing on top of your currently active UI (coming soon)</li></ul><h3 id="requiring" tabindex="-1">Requiring <a class="header-anchor" href="#requiring" aria-hidden="true">#</a></h3><div class="language-lua"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> uiManager </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hammerstone/ui/uiManager</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="using" tabindex="-1">Using <a class="header-anchor" href="#using" aria-hidden="true">#</a></h3><p>The uiManager relies on the concept of &#39;views&#39;. A view is a place where UI can be put. For example, a <code>GameView</code> covers (almost) the whole screen and captures the mouse.</p><h4 id="elements" tabindex="-1">Elements <a class="header-anchor" href="#elements" aria-hidden="true">#</a></h4><h5 id="action-elements" tabindex="-1">Action Elements <a class="header-anchor" href="#action-elements" aria-hidden="true">#</a></h5><p>Action Elements are rendered beside the radial menu that appears when selecting an object in the world. To register an Action Element, call <code>registerActionElement</code> on the <code>uiManager</code> like this:</p><div class="language-lua"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> exampleActionElement </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">exampleMod/exampleActionElement</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">uiManager</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">registerActionElement</span><span style="color:#A6ACCD;">(exampleActionElement);</span></span>
<span class="line"></span></code></pre></div><p>The Action Element module should look something like this:</p><div class="language-lua"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">-- Module setup</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> exampleActionElement </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">-- Required by the UI Manager</span></span>
<span class="line"><span style="color:#A6ACCD;">	view </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">--  Required by the UI Manager</span></span>
<span class="line"><span style="color:#A6ACCD;">	name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Example Action Element</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Requires</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Add requires here</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- This function is called automatically from the UI manager</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">exampleActionElement</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">initActionElement</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">viewContainer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> gameUI</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> hubUI</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> world</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">-- Create a parent container</span></span>
<span class="line"><span style="color:#A6ACCD;">	self.view </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> View.</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">(viewContainer)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">-- Add any button/other UI components here</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Module return</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> exampleActionElement</span></span>
<span class="line"></span></code></pre></div><h5 id="game-elements" tabindex="-1">Game Elements <a class="header-anchor" href="#game-elements" aria-hidden="true">#</a></h5><p>Game Elements are shown nearly fullscreen to the user. To register a Game Elemenet, call <code>registerGameElement</code> on the <code>uiManager</code> like this:</p><div class="language-lua"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> exampleGameElement </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">exampleMod/exampleGameElement</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">uiManager</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">registerActionElement</span><span style="color:#A6ACCD;">(exampleGameElement);</span></span>
<span class="line"></span></code></pre></div><p>The Game Element module should look something like this:</p><div class="language-lua"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> exampleActionElement </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    gameUI </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">exampleActionElement</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	view </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Requires</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mjm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/mjm</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.vec3</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.vec2</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Add more requires here</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Local state</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> backgroundWidth </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1140</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> backgroundHeight </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">640</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> backgroundSize </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vec2</span><span style="color:#A6ACCD;">(backgroundWidth, backgroundHeight)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Called when the UI needs to be generated</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">exampleActionElement</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">initGameElement</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">gameUI</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    self.view </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> View.</span><span style="color:#82AAFF;">new</span><span style="color:#A6ACCD;">(gameUI.view)</span></span>
<span class="line"><span style="color:#A6ACCD;">	self.view.size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> backgroundSize</span></span>
<span class="line"><span style="color:#A6ACCD;">	self.view.relativePosition </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ViewPosition</span><span style="color:#A6ACCD;">(MJPositionCenter, MJPositionCenter)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- Called every frame</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">exampleActionElement</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">updateGameElement</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">gameUI</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> exampleActionElement</span></span>
<span class="line"></span></code></pre></div>`,18),p=[o];function t(c,r,i,y,D,A){return a(),n("div",null,p)}var m=s(l,[["render",t]]);export{C as __pageData,m as default};
