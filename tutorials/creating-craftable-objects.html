<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Craftable object in Lua | Sapiens Modding Wiki</title>
    <meta name="description" content="Modding documentation for the Sapiens video game.">
    <link rel="stylesheet" href="/assets/style.9661a6da.css">
    <link rel="modulepreload" href="/assets/chunks/VPAlgoliaSearchBox.76909737.js">
    <link rel="modulepreload" href="/assets/app.c45ca641.js">
    <link rel="modulepreload" href="/assets/tutorials_creating-craftable-objects.md.16559667.lean.js">
    
    <link rel="stylesheet" href="/index.css">
  <link rel="icon" href="/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a644e1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c6a644e1 data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8e4dd84f><!--]--><!--[-->Sapiens Modding Wiki<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6f1d18b5 style="--5943dbe8:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://www.playsapiens.com/" target="_blank" rel="noreferrer" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Sapiens Website<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://wiki.playsapiens.com/" target="_blank" rel="noreferrer" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Sapiens Wiki<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://github.com/Majic-Jungle/sapiens-mod-creation/wiki" target="_blank" rel="noreferrer" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Sapiens Modding Wiki<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-51c451fd data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-51c451fd><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-51c451fd><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/Sapiens-OSS/sapiens-modding-wiki" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://discord.gg/WnN8hj2Fyg" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-51c451fd data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-51c451fd><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-51c451fd><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/Sapiens-OSS/sapiens-modding-wiki" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://discord.gg/WnN8hj2Fyg" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-c6a644e1 data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-c6a644e1 data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Guides</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/guide/vscode-getting-started.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Getting Started with VSCode</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guide/lua-getting-started.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Getting Started with Lua</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guide/c-getting-started.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Getting Started with C</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guide/shadowing.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Using Lua Shadows</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Documentation</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><span class="VPLink link" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Visuals</span><!--]--><!----></span><!--[--><!--[--><a class="VPLink link link" href="/docs/visuals/materials.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Materials</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/visuals/shaders.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Shaders</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/visuals/model-format.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Model Format</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/visuals/coordinates.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Coordinates</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/visuals/user-interface.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>User Interface</span><!--]--><!----></a><!----><!--]--><!--]--><!--]--><!--[--><span class="VPLink link" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Scripts</span><!--]--><!----></span><!--[--><!--[--><a class="VPLink link link" href="/docs/scripting/mod-types.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Mod Types</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/mobs.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Mobs</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/bridge.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Engine Bridges</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/cheat.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Dev Tools</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/game-saves.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Game Saves</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/handling-input.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Input</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/thread-management.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Thread Management</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/timers.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Timers</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/scripting/worldgen.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>World Generation</span><!--]--><!----></a><!----><!--]--><!--]--><!--]--><!--[--><span class="VPLink link" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Miscellaneous</span><!--]--><!----></span><!--[--><!--[--><a class="VPLink link link" href="/docs/misc/abbrev.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Abbreviations</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/misc/common-issues.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Common Issues</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/docs/misc/notes.html" style="padding-left:16px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text light" data-v-2cfe069a>Other Notes</span><!--]--><!----></a><!----><!--]--><!--]--><!--]--><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Hammerstone</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/hammerstone/introduction.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Introduction</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/hammerstone/getting-started.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Getting Started</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/hammerstone/logger.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Logger</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/hammerstone/ui-manager.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>UI Manager</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/hammerstone/input-manager.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Input Manager</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/hammerstone/save-state.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Save State</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Tutorials</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link active" href="/tutorials/creating-craftable-objects.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Craftable object in Lua</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c6a644e1 data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-37ebe389><div class="container" data-v-37ebe389><div class="aside" data-v-37ebe389><div class="aside-curtain" data-v-37ebe389></div><div class="aside-container" data-v-37ebe389><div class="aside-content" data-v-37ebe389><div class="VPDocAside" data-v-37ebe389 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-37ebe389><div class="content-container" data-v-37ebe389><!--[--><!--]--><main class="main" data-v-37ebe389><div style="position:relative;" class="vp-doc _tutorials_creating-craftable-objects" data-v-37ebe389><div><h1 id="craftable-object-in-lua" tabindex="-1">Craftable object in Lua <a class="header-anchor" href="#craftable-object-in-lua" aria-hidden="true">#</a></h1><p>In this tutorial, we will create a small mod that adds charcoal as a craftable object to the game. It is based on a minimal <a href="https://github.com/nmattela/sapiens_coal_mod" target="_blank" rel="noreferrer">Coal mod</a>. This tutorial is written for update 0.3.8. It is possible that this tutorial will not work for future updates.</p><h2 id="getting-started" tabindex="-1">Getting started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h2><p>To get started, follow the <a href="/guide/lua-getting-started.html">Getting Started with Lua</a> guide. This tutorial also uses the <a href="/hammerstone/introduction.html">Hammerstone Framework</a> to make your life a bit easier. Optionally, you can also install <a href="https://github.com/SirLich/sapiens-creative-mode" target="_blank" rel="noreferrer">Creative Mode</a> to make debugging and testing a bit faster.</p><p>I assume you have shadowed <code>scripts/mainThread/controller.lua</code> and created a directory called <code>scripts/&lt;yourName&gt;/coal.lua</code>. In this file, add the following content:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> coal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">coal</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">init</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">mj</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Initializing the Coal mod...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">mj</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Coal mod initialized!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> coal</span></span>
<span class="line"></span></code></pre></div><p>That&#39;s it! Congratulations, you made your first mod! Just kidding... Obviously your mod doesn&#39;t do anything. For that, we will have to shadow a couple more files. If you&#39;re unfamiliar with the concept of shadowing, <a href="/guide/shadowing.html">consult this guide</a>. Also, make sure to have the game&#39;s source code open as well to consult. You can find it in <code>SteamLibrary/steamapps/common/Sapiens/GameResources</code>. Check Steam settings on what disk your SteamLibrary is located.</p><h2 id="defining-a-gameobject" tabindex="-1">Defining a gameObject <a class="header-anchor" href="#defining-a-gameobject" aria-hidden="true">#</a></h2><p>Create the directory <code>scripts/common</code>. We will start by adding a charcoal object to the game. We do so by creating the file <code>scripts/common/gameObject.lua</code>. Like every other file in <code>scripts/common</code>, begin by creating the module, importing some files, and declaring the <code>onload</code> function:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    loadOrder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/resource</span><span style="color:#89DDFF;">&quot; </span><span style="color:#676E95;">-- &lt;- mjrequire imports files from either the source code, your mod, or from another mod, depending on the hierarchy of mod loads.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mjm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/mjm</span><span style="color:#89DDFF;">&quot; </span><span style="color:#676E95;">-- &lt;- mjm contains some functions to work with vectors</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">vec3</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Identity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Identity</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Rotate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Rotate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mod</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">onload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">gameObject</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> super_mjInit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gameObject.</span><span style="color:#FFCB6B;">mjInit</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- Store the current value of mjInit in a local variable because we will be overriding it but still need to call it</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    gameObject.</span><span style="color:#FFCB6B;">mjInit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- mjInit gets called on initialization</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">-- Do something --</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">super_mjInit</span><span style="color:#A6ACCD;">(self) </span><span style="color:#676E95;">-- &lt;- VERY IMPORTANT!!!! DO NOT FORGET TO ALWAYS CALL THE SUPER OR THINGS MAY BREAK!!!</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> mod </span><span style="color:#676E95;">-- &lt;- Equally important</span></span>
<span class="line"></span></code></pre></div><p>With this boilerplating done, we can add a gameObject. Put the following code in place of the <code>-- Do something --</code> comment in <code>gameObject.mjInit</code>:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#FFCB6B;">gameObject</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">addGameObject</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, {</span></span>
<span class="line"><span style="color:#A6ACCD;">    modelName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- This references a model we have yet to define</span></span>
<span class="line"><span style="color:#A6ACCD;">    name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Do not do this if you want to support localization with your mod. Check out localization for more info</span></span>
<span class="line"><span style="color:#A6ACCD;">    plural </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem</span></span>
<span class="line"><span style="color:#A6ACCD;">    scale </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    hasPhysics </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    resourceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- This references a resource we have yet to define</span></span>
<span class="line"><span style="color:#A6ACCD;">    objectViewRotationFunction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">object</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mat3Rotate</span><span style="color:#A6ACCD;">(mat3Identity, </span><span style="color:#F78C6C;">0.1</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    markerPositions </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            worldOffset </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">mj</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">mToP</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.2</span><span style="color:#A6ACCD;">), </span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"></span></code></pre></div><p>As you can see, there are quite a few parameters to tweak with. These all define the behavior of your gameObject. Go and have some fun and experiment with them a bit (once your code runs of course).</p><p>This is already a good start, but as the comments explain, there are some more things we need to do to make this gameObject come to life. Specifically, we still have to define a model and a resource (and other things too).</p><h2 id="defining-a-model-and-a-material" tabindex="-1">Defining a model and a material <a class="header-anchor" href="#defining-a-model-and-a-material" aria-hidden="true">#</a></h2><p>In Sapiens, a model is the visual representation of a gameObject (or other kinds of resources). It is stored in the game&#39;s files as a <code>.glb</code> file, which is a 3D model file that can be created using a program such as Blender.</p><p>As I am not talented enough to work with Blender, I am simply going to copy the <code>models/rock1.glb</code> file from the game&#39;s source code and paste it into my mod directory under <code>models/charcoal.glb</code> (you will have to create the <code>models/</code> directory first). You can of course create your own model.</p><p>We then register this model in <code>scripts/common/model.lua</code>:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    loadOrder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mod</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">onload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">model</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    model.</span><span style="color:#FFCB6B;">remapModels</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">dirt</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        dirt </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> mod</span></span>
<span class="line"></span></code></pre></div><p>It sounds quite random that we have to remap <code>dirt</code>, but my two cents is that <code>dirt</code> refers to the shape of the item, as all items that fall under this dirt category (rock, clay, etc.) have similar model shapes.</p><p>We can define the texture of this model in <code>scripts/common/material.lua</code>:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    loadOrder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mjm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/mjm</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">vec3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mod</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">onload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">material</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">mj</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">insertIndexed</span><span style="color:#A6ACCD;">(material.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">, {</span></span>
<span class="line"><span style="color:#A6ACCD;">        key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.035</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.027</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.016</span><span style="color:#A6ACCD;">), </span><span style="color:#676E95;">-- &lt;-- You can change its color if you&#39;d like</span></span>
<span class="line"><span style="color:#A6ACCD;">        roughness </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.1</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        metal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.1</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        colorB </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">        roughnessB </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.9</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        metalB </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.1</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> mod</span></span>
<span class="line"></span></code></pre></div><h2 id="defining-a-resource" tabindex="-1">Defining a resource <a class="header-anchor" href="#defining-a-resource" aria-hidden="true">#</a></h2><p>Sapiens has different types of resources: food, weapons, tools, and other items. These are all referenced in <code>scripts/resource.lua</code>. We will have to add our charcoal gameObject to that list. Do so by creating <code>scripts/resource.lua</code> in your mod directory, and defining the <code>mod</code> module, the function <code>mod:onload</code> and some imports like we did before:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    loadOrder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> locale </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/locale</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> typeMaps </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/typeMaps</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mod</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">onload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resource</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> super_mjInit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> resource.</span><span style="color:#FFCB6B;">mjInit</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- Like before, we store the old mjInit value so we can call it inside our own mjInit</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> gameObjectTypeIndexMap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> typeMaps.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">gameObject</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- We need the gameObject typeMap. typeMaps can be imported using</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- Do something --</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> mod</span></span>
<span class="line"></span></code></pre></div><p>In the <code>onload</code> function, replace <code>-- Do something --</code> with the following code:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#A6ACCD;">resource.</span><span style="color:#FFCB6B;">mjInit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">super_mjInit</span><span style="color:#A6ACCD;">(self) </span><span style="color:#676E95;">-- &lt;- Here, we call the super first instead of last. This is because our charcoal relies on other resources to be loaded in first, such as the campfire.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">resource</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">addResource</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, { </span><span style="color:#676E95;">-- &lt;- Here, we will leverage on a Hammerstone functionality to more easily add resources</span></span>
<span class="line"><span style="color:#A6ACCD;">        name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Again, do not do this if you want to support localization</span></span>
<span class="line"><span style="color:#A6ACCD;">        plural </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem</span></span>
<span class="line"><span style="color:#A6ACCD;">        displayGameObjectTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gameObjectTypeIndexMap.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- Fetch our gameObject by its ID (charcoal)</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><p>Now, we have added charcoal as a resource. But we would like to tell Sapiens that charcoal can be used as fuel for campfires. For that, we will have to reference this resource in the resourceGroup for campfires. Add this code right after the previous code:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#FFCB6B;">resource</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">addResourceGroup</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">campfireFuel</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, { </span><span style="color:#676E95;">-- &lt;- campfireFuel already exists, but we will override it with our own custom implementation</span></span>
<span class="line"><span style="color:#A6ACCD;">    name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">locale</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resource_group_campfireFuel</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">), </span><span style="color:#676E95;">-- &lt;- This is how localization is properly handled</span></span>
<span class="line"><span style="color:#A6ACCD;">    plural </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">locale</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">resource_group_campfireFuel_plural</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    resourceTypes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">branch</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Same as in source code</span></span>
<span class="line"><span style="color:#A6ACCD;">        resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">log</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem</span></span>
<span class="line"><span style="color:#A6ACCD;">        resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">pineCone</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem</span></span>
<span class="line"><span style="color:#A6ACCD;">        resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">pineConeBig</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem</span></span>
<span class="line"><span style="color:#A6ACCD;">        resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- This is new</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    containsTypesHash </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {},</span></span>
<span class="line"><span style="color:#A6ACCD;">    displayGameObjectTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gameObjectTypeIndexMap.</span><span style="color:#FFCB6B;">birchBranch</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"></span></code></pre></div><p>You can do the same for <code>kilnFuel</code> and <code>torchFuel</code>, if you&#39;d like.</p><h2 id="adding-to-a-storage" tabindex="-1">Adding to a storage <a class="header-anchor" href="#adding-to-a-storage" aria-hidden="true">#</a></h2><p>If you have read the source code for <code>resource.lua</code>, you likely have seen this comment: <code>WHEN ADDING RESOURCE TYPES: Dont forget to add to storage.lua</code>. That&#39;s right, just when you thought everything was complete, we still need to tie some loose ends. Again, create the file <code>scripts/common/storage.lua</code>:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    loadOrder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> typeMaps </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/typeMaps</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/resource</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rng </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/randomNumberGenerator</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mjm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/mjm</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">vec3</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Rotate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Rotate</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Identity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Identity</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mod</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">onload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">storage</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- This time, we will not override mjInit. To be honest, I am not certain why, but if you do override mjInit, things will break :/</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- Do something --</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> mod</span></span>
<span class="line"></span></code></pre></div><p>Replace <code>-- Do something --</code> with:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#FFCB6B;">storage</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">addStorage</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, { </span><span style="color:#676E95;">-- &lt;- Again, we rely on Hammerstone here</span></span>
<span class="line"><span style="color:#A6ACCD;">    name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    displayGameObjectTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> typeMaps.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">gameObject</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- reference gameObject</span></span>
<span class="line"><span style="color:#A6ACCD;">    resources </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Reference resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    storageBox </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;">-- &lt;- How the gameObject looks like when it is stored</span></span>
<span class="line"><span style="color:#A6ACCD;">        size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">0.1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">0.1</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">        rotationFunction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uniqueID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">seed</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> randomValue </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">rng</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">valueForUniqueID</span><span style="color:#A6ACCD;">(uniqueID, seed)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> rotation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mat3Rotate</span><span style="color:#A6ACCD;">(mat3Identity, randomValue </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6.282</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">            rotation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mat3Rotate</span><span style="color:#A6ACCD;">(rotation, randomValue </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6.282</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> rotation</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    maxCarryCount </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- How much charcoal can a Sapiens carry at a time?</span></span>
<span class="line"><span style="color:#A6ACCD;">    maxCarryCountLimitedAbility </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem but for kids, pregnant women and elderly</span></span>
<span class="line"><span style="color:#A6ACCD;">    maxCarryCountForRunning </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Idem but when a Sapien is running (e.g. from a mammoth)</span></span>
<span class="line"><span style="color:#A6ACCD;">    carryType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> storage.</span><span style="color:#FFCB6B;">carryTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">small</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    carryOffset </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.01</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"></span></code></pre></div><p>Great! Our charcoal has been added to the game! However, it is not yet obtainable because it lacks a crafting recipe. Let&#39;s add that.</p><h2 id="adding-a-craftable-recipe" tabindex="-1">Adding a craftable recipe <a class="header-anchor" href="#adding-a-craftable-recipe" aria-hidden="true">#</a></h2><p>Charcoal can be crafted in a campfire by using 3 branches which give you 2 charcoal (game balance is beyond the scope of this tutorial). We will describe this in a crafting recipe.</p><p>Let&#39;s start with the boilerplating again. This time, the boilerplating is a bit larger because we copy/paste some functions and constants from the source code that describe a crafting animation for food, which we will be using for the crafting animation of charcoal (I am lazy and don&#39;t know how to animate).</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mod </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    loadOrder </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mjm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/mjm</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">vec3</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> vec3xMat3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">vec3xMat3</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Identity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Identity</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Rotate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Rotate</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> mat3Inverse </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mjm.</span><span style="color:#FFCB6B;">mat3Inverse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> gameObject </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/gameObject</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> constructable </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/constructable</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> actionSequence </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/actionSequence</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> skill </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/skill</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> resource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/resource</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> craftAreaGroup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mjrequire</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">common/craftAreaGroup</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- Begin copy/paste from source code --</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> cookingStickRotationOffset </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mat3Inverse</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">mat3Rotate</span><span style="color:#A6ACCD;">(mat3Identity, </span><span style="color:#89DDFF;">math.pi</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.25</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))) </span><span style="color:#676E95;">-- &lt;- We use the same animation as cooking food because I am lazy and don&#39;t know how to animate stuff</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> cookingStickRotation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mat3Rotate</span><span style="color:#A6ACCD;">(mat3Identity, </span><span style="color:#89DDFF;">-math.pi</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">math.pi</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.25</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> actionSequenceRepeatCountSlowerCompletion </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span></span>
<span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createStandardBuildSequence</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">actionSequenceTypeIndex</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">requiredToolIndex</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">repeatCountOrNil</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- Step-by-step explanation of how the animation goes</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            constructableSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">sequenceTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">clearIncorrectResources</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            constructableSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">sequenceTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">clearObjects</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            constructableSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">sequenceTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">bringResources</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            constructableSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">sequenceTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">bringTools</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            constructableSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">sequenceTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">moveComponents</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">            constructableSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">sequenceTypes</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">actionSequence</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            actionSequenceTypeIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> actionSequenceTypeIndex,</span></span>
<span class="line"><span style="color:#A6ACCD;">            requiredToolIndex </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> requiredToolIndex,</span></span>
<span class="line"><span style="color:#A6ACCD;">            disallowCompletionWithoutSkill </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            repeatCount </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> repeatCountOrNil </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> actionSequenceRepeatCountSlowerCompletion,</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"><span style="color:#676E95;">-- End copy/paste from source code --</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">mod</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">onload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">craftable</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    super_load </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> craftable.</span><span style="color:#FFCB6B;">load</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">-- &lt;- We will now be overriding load instead of mjInit. Again, not sure why</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- Do something --</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> mod</span></span>
<span class="line"></span></code></pre></div><p>Then, replace <code>-- Do something --</code> with:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#A6ACCD;">craftable.</span><span style="color:#FFCB6B;">load</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">gameObject</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">flora</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">super_load</span><span style="color:#A6ACCD;">(self, gameObject, flora) </span><span style="color:#676E95;">-- &lt;- Call the super first</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">constructable</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">addConstructable</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, {</span></span>
<span class="line"><span style="color:#A6ACCD;">        name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoal</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        plural </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">charcoals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        summary </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Charcoal is a fuel that lasts longer than branches or logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        iconGameObjectType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gameObject.</span><span style="color:#FFCB6B;">typeIndexMap</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        classification </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> constructable.</span><span style="color:#FFCB6B;">classifications</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">craft</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        isFoodPreperation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- I know it&#39;s not, but otherwise we cannot use a campfire to make our charcoal</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        outputObjectInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;">-- &lt;- What the crafting result is. In our case, 2 charcoals</span></span>
<span class="line"><span style="color:#A6ACCD;">            objectTypesArray </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">                gameObject.</span><span style="color:#FFCB6B;">typeIndexMap</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                gameObject.</span><span style="color:#FFCB6B;">typeIndexMap</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">charcoal</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        outputDisplayCount </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        buildSequence </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createStandardBuildSequence</span><span style="color:#A6ACCD;">(actionSequence.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">fireStickCook</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">        inProgressBuildModel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">craftSimple</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        skills </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">            required </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> skill.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">fireLighting</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- We require that the Sapien knows fire lighting before it can craft charcoal</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        requiredResources </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;">-- &lt;- The ingredients for the crafting recipe. In our case, 3 branches</span></span>
<span class="line"><span style="color:#A6ACCD;">            {</span></span>
<span class="line"><span style="color:#A6ACCD;">                type </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> resource.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">branch</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            },</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        requiredCraftAreaGroups </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">            craftAreaGroup.</span><span style="color:#FFCB6B;">types</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">campfire</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- Only allow charcoal to be crafted at a campfire</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        temporaryToolObjectType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gameObject.</span><span style="color:#FFCB6B;">typeIndexMap</span><span style="color:#A6ACCD;">.</span><span style="color:#FFCB6B;">stick</span><span style="color:#A6ACCD;">, </span><span style="color:#676E95;">-- &lt;- For animation purposes</span></span>
<span class="line"><span style="color:#A6ACCD;">        temporaryToolOffset </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">vec3xMat3</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">vec3</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">0.35</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">), cookingStickRotationOffset),</span></span>
<span class="line"><span style="color:#A6ACCD;">        temporaryToolRotation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> cookingStickRotation,</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><p>Voila, the recipe is added.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-hidden="true">#</a></h2><p>This concludes our minimalist mod that creates a charcoal object and its associated model, then adds it as a resource and a storable item, along with a recipe to craft it at a campfire.</p><p>You can copy/paste the code, make some modifications, then run Sapiens and create a new world, enabling both this mod as well as the hammerstone framework mod. If it works (likely it will not), then you can click on a branch in a storage area, choose craft, and see the charcoal as one of the crafting options.</p><h3 id="my-code-does-not-work" tabindex="-1">My code does not work <a class="header-anchor" href="#my-code-does-not-work" aria-hidden="true">#</a></h3><p>Either you made a change, or I made a typo, either way this is a valuable lesson to learn as you will constantly have to fix annoying bugs.</p><p>Fixing bugs is best done by checking the logs. There are two log locations:</p><ul><li>The main Sapiens logs, check these logs if your game crashes before being able to create a world. These can be found at <code>AppData/roaming/sapiens/</code> or for Proton users: <code>/SteamLibrary/steamapps/compatdata/1060230/pfx/drive_c/users/steamuser/AppData/Roaming/majicjungle/sapiens</code></li><li>The world logs, check these logs if your game crashes after hitting <code>create world</code>. Even if your game does not crash, these logs can still contain useful errors. These can be found at <code>AppData/roaming/sapiens/players/playerID/worlds/worldID/logs</code> or for Proton users: <code>/mnt/LinuxHDD/SteamLibrary/steamapps/compatdata/1060230/pfx/drive_c/users/steamuser/AppData/Roaming/majicjungle/sapiens/players/playerID/worlds/worldID/logs</code></li></ul><p>Ask for help in the <a href="https://discord.gg/WnN8hj2Fyg" target="_blank" rel="noreferrer">Discord</a> if you&#39;re stuck. Have fun!</p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-37ebe389 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><div class="edit-link" data-v-a54a85bd><a class="VPLink link edit-link-button" href="https://github.com/Sapiens-OSS/sapiens-modding-wiki/edit/master/docs/tutorials/creating-craftable-objects.md" target="_blank" rel="noreferrer" data-v-a54a85bd data-v-3c355974><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-a54a85bd><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page<!--]--><!----></a></div><div class="last-updated" data-v-a54a85bd><p class="VPLastUpdated" data-v-a54a85bd data-v-f7d51a9c>Last updated: <time datatime="2022-12-29T01:01:59.000Z" data-v-f7d51a9c></time></p></div></div><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/hammerstone/save-state.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>Save State</span></a></div><div class="has-prev pager" data-v-a54a85bd><!----></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"docs_edge-decals.md\":\"4096450f\",\"docs_misc_abbrev.md\":\"c0a1934f\",\"docs_misc_common-issues.md\":\"cf2f4375\",\"docs_misc_notes.md\":\"b06a2a8c\",\"docs_scripting_bridge.md\":\"db01cbf3\",\"docs_scripting_cheat.md\":\"ef8ac59d\",\"docs_scripting_game-saves.md\":\"40e1c81d\",\"docs_scripting_handling-input.md\":\"97c1821f\",\"docs_scripting_mobs.md\":\"f5cdc01a\",\"docs_scripting_mod-types.md\":\"8812c0cf\",\"docs_scripting_thread-management.md\":\"9a972d7c\",\"docs_scripting_timers.md\":\"1b9da07c\",\"docs_scripting_worldgen.md\":\"a641e325\",\"docs_visuals_coordinates.md\":\"3d28d645\",\"docs_visuals_materials.md\":\"1c0a361e\",\"docs_visuals_model-format.md\":\"d4338246\",\"docs_visuals_shaders.md\":\"87b385c4\",\"docs_visuals_user-interface.md\":\"e8ad04f7\",\"guide_c-getting-started.md\":\"221c0329\",\"guide_lua-getting-started.md\":\"194e024a\",\"guide_shadowing.md\":\"e8ebeda9\",\"guide_vscode-getting-started.md\":\"03e3a038\",\"hammerstone_getting-started.md\":\"34f369b0\",\"hammerstone_input-manager.md\":\"93a2fb61\",\"hammerstone_introduction.md\":\"7d638a3c\",\"hammerstone_logger.md\":\"e855f1d9\",\"hammerstone_save-state.md\":\"e9a0ba82\",\"hammerstone_ui-manager.md\":\"eec06795\",\"index.md\":\"b657fb54\",\"tutorials_creating-craftable-objects.md\":\"16559667\",\"tutorials_modifying-terrain-generation.md\":\"95804e6d\"}")</script>
    <script type="module" async src="/assets/app.c45ca641.js"></script>
    
  </body>
</html>